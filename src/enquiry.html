<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta charset="utf-8" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
    crossorigin="anonymous">
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script type="text/javascript" language="javascript">
      let validEmail = false;
      let validPhone = false;
      let validPostalCode = false;

      //var baseURL="http://localhost:52622";
      var baseURL="https://fostering.starlight.inc/Starlighttestapi";

$(document).ready(function() {

  const validateEmail = (email) => {
              return email.match(
              /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/
            );
          };

const validate = () => {

  const $result = $('#result');
  const email = $('#txtEmail').val();
  $result.text('');

  if(validateEmail(email)){
    validEmail = true;
    //$result.text(email + ' is valid.');
    $result.css('color', 'green');


  } else{
    validEmail = false;
    $result.text('Invalid Email address.');
    $result.css('color', 'red');

  }
  return false;

}
  $('#txtEmail').on('input', validate);
});

$(document).ready(function() {

const validateContact = (phone) => {

          if(phone.length < 9)
            return false;
          else
            return true;
        };

const validate = () => {

const $contact = $('#contact');
const phone = $('#txtPhone').val();
$contact.text('');

if(validateContact(phone)){
  validPhone = true;
  //$contact.text(phone + ' is valid.');
  //$result.css('color', 'green');


} else{
  validPhone = false;
  $contact.text('Atleast 9 digits required.');
  $contact.css('color', 'red');

}
return false;

}
$('#txtPhone').on('input', validate);
});
$(document).ready(function() {

const validatePostalCode = (postcode) => {

          if(postcode.length < 5)
            return false;
          else
            return true;
        };

const validate = () => {

const $postalcode = $('#postalcode');
const postcode = $('#txtPostCode').val();
$postalcode.text('');

if(validatePostalCode(postcode)){
  validPostalCode = true;
  //$contact.text(phone + ' is valid.');
  //$result.css('color', 'green');


} else{
  validPostalCode = false;
  $postalcode.text('Atleast 5 characters required.');
  $postalcode.css('color', 'red');

}
return false;

}
$('#txtPostCode').on('input', validate);
});
        $(function(){

            getEthincity();
            $('#divPlaceWait').css('display','none');
            $('.numberonly').keypress(function (evt) {
                debugger;
                evt = (evt) ? evt : window.event;
                var charCode = (evt.which) ? evt.which : evt.keyCode;
                if (charCode > 31 && (charCode < 48 || charCode > 57)) {
                    return false;
                }
                return true;
            });

            $('#btnsubmit').click(function(){
                UserAction();
            });
        });

        function getQueryParams(url) {
            const params = new Proxy(new URLSearchParams(window.location.search), {
                get: (searchParams, prop) => searchParams.get(prop),
            });
            let value = params.aid;
            return value;
        }


        function getEthincity()
        {
            //var agencyId=getQueryParams();

            //  ///Get Religion
            //  var Serial = $.post(baseURL+'/api/InitialEnquiry/GetInitialInterestInfoEthnicity', { "AgencyProfileId": agencyId,"Name":"Religion"})
            //     .then(data=>{
            //         if(data.length>0)
            //         {
            //             $.each(data, function (index, PARAM) {
            //                     $('#Religion').append($('<option></option>').val(PARAM.CofigTableValuesId).html(PARAM.Value));
            //             });
            //         }
            //     });

                // // Get Ethnicity
                // var Serial = $.post(baseURL+'/api/InitialEnquiry/GetInitialInterestInfoEthnicity', { "AgencyProfileId": agencyId,"Name":"Ethnicity"})
                // .then(data=>{
                //     if(data.length>0)
                //     {
                //         $.each(data, function (index, PARAM) {
                //                 $('#ddlEthnicity').append($('<option></option>').val(PARAM.CofigTableValuesId).html(PARAM.Value));
                //         });
                //     }
                // });

                // // get SourceOfMedium
                // var Serial = $.post(baseURL+'/api/InitialEnquiry/GetInitialInterestInfoEthnicity', { "AgencyProfileId": agencyId,"Name":"SourceOfMedium"})
                // .then(data=>{
                //     if(data.length>0)
                //     {
                //         $.each(data, function (index, PARAM) {
                //             $('#ddlhearaboutourAgency').append($('<option></option>').val(PARAM.CofigTableValuesId).html(PARAM.Value));
                //         });
                //     }
                // });


                // // Get When the Best Time To Call You
                // var Serial = $.post(baseURL+'/api/InitialEnquiry/GetInitialInterestInfoEthnicity', { "AgencyProfileId": agencyId,"Name":"WhentheBestTimeToCallYou"})
                // .then(data=>{
                //     if(data.length>0)
                //     {
                //         $.each(data, function (index, PARAM) {
                //                 $('#dllBestTime').append($('<option></option>').val(PARAM.CofigTableValuesId).html(PARAM.Value));
                //         });
                //     }
                // });


                //  // Get NewToFosteringOrTransferring
                //  var Serial = $.post(baseURL+'/api/InitialEnquiry/GetInitialInterestInfoEthnicity', { "AgencyProfileId": agencyId,"Name":"NewToFosteringOrTransferring"})
                // .then(data=>{
                //     if(data.length>0)
                //     {
                //         $.each(data, function (index, PARAM) {
                //                 $('#ddlNewfostering').append($('<option></option>').val(PARAM.CofigTableValuesId).html(PARAM.Value));
                //         });
                //     }
                // });
        }

        function clearData()
        {
            $("#txtFirstName").val("");
            $("#txtLastName").val("");
            $("#txtAge").val("");
            $('#ddlGender').val("");
            $("#ddlMaritalStatus").val("");
            $("#txtPhone").val("");
            $("#txtEmail").val("");
            $("#txtCity").val("");
            $("#Religion").val("");
            $("#txtAddress").val("");
            $("#txtPostCode").val("");
            $("#ddlRegion").val("");
            $("#ddlhearaboutourAgency").val("");
            $("#ddlBedrooms").val("");
            $("#result").text("");
            $("#currentlyFosterParentYes").prop("checked", false);
            $("#currentlyFosterParentNo").prop("checked", false);
            $("#haveSpareBedroomYes").prop("checked", false);
            $("#haveSpareBedroomNo").prop("checked", false);
            $("#areYouOver21Yes").prop("checked", false);
            $("#areYouOver21No").prop("checked", false);
            $("#righttoworkYes").prop("checked", false);
            $("#righttoworkNo").prop("checked", false);
            $("#gdprConsent").prop("checked", false);

        }

        function UserAction() {
            var agencyId=getQueryParams();

            var txtFirstName =$.trim($("#txtFirstName").val() || '');
            var txtLastName = $.trim($("#txtLastName").val()|| '');
            //var txtAge = $.trim($("#txtAge").val()|| '');
            //var Gender = $.trim($('#ddlGender option:selected').val()|| '0');
            //var ddlMaritalStatus = $.trim($("#ddlMaritalStatus option:selected").val()|| '0');
            var txtPhone = $.trim($("#txtPhone").val()|| '');
            var txtEmail = $.trim($("#txtEmail").val()|| '');
            //var txtCity = $.trim($("#txtCity").val()|| '');
            //var txtRegion = $.trim($("#Religion option:selected").val()|| '0');
            //var txtAddress = $.trim($("#txtAddress").val()|| '');
            var txtPostCode = $.trim($("#txtPostCode").val()|| '');
            //var txtReligion = $.trim($("#ddlRegion").val()|| '0');
            //var ddlhearaboutourAgen = $.trim($("#ddlhearaboutourAgency option:selected").val()|| '0');
            //var ddlBedrooms = $.trim($("#ddlBedrooms option:selected").val()|| '');

            //var ddlEthnicity = $.trim($("#ddlEthnicity option:selected").val()|| '0');
            //var dllBestTime = $.trim($("#dllBestTime option:selected").val()|| '0');

            //var lives = $("input:radio[name='lives']:checked").val();
            var righttowork = $("input:radio[name='righttowork']:checked").val();
            //var newfostering = $.trim($("#ddlNewfostering option:selected").val()|| '0');

            var areYouOver21 = $("input:radio[name='areYouOver21']:checked").val();
            var haveSpareBedroom = $("input:radio[name='haveSpareBedroom']:checked").val();
            var currentlyFosterParent = $("input:radio[name='currentlyFosterParent']:checked").val();
            var gDPRConsentTick = $("input:checkbox[name='GDPRConsent']:checked").val();;
            // console.log(righttowork);
            // console.log(newfostering);
            // console.log(lives);
            var ItemJSON;
            var Founderrror = false;

            if(txtFirstName==''||txtLastName==''||txtPhone==''||txtEmail==''
            || righttowork==undefined || areYouOver21==undefined || haveSpareBedroom== undefined
            || currentlyFosterParent == undefined || gDPRConsentTick== undefined || validEmail == false
            || validPostalCode == false || validPhone == false)
            {
                Founderrror = true;
                swal("Please fill all the mandatory values ", "", "info");
            }

            if(!Founderrror){
                $('#btnsubmit').css('display','none');
                $('#divPlaceWait').css('display','block');

                var Serial = $.post(baseURL+'/api/InitialEnquiry/CarerInitialInterestInfo',
                 { "AgencyProfileId": agencyId,"FirstName":txtFirstName,"LastName":txtLastName,
                "Phone": txtPhone,"Email":txtEmail,"PostCode": txtPostCode,"Righttowork":righttowork,
                "AreYouOver21":areYouOver21 , "HaveSpareBedroom" : haveSpareBedroom ,
                "CurrentlyFosterParent" : currentlyFosterParent, "GDPRConsentTick" :"1"})
                    .success(function () {
                        clearData();
                        swal({
                            title: 'Success!',
                            text: 'Thank you for your interest, we will get back to you shortly',
                            type: 'success'
                        });
                        $('#divPlaceWait').css('display','none');
                        $('#btnsubmit').css('display','block');
                    })
                    .error(function () {
                        swal("Error occurred", "", "error");
                        $('#divPlaceWait').css('display','none');
                        $('#btnsubmit').css('display','block');
                    });
                return false;
            }
        };
    </script>
    <style>
        .spnMandatory{
            color: red;
            font-size:16px;
        }
    </style>
</head>
<body>
    <!-- <form id="form1" method="post" > -->
        <div class="wrapper" id="contact-form"  style="display: block;">
            <div id="main" style="padding: 0px 0 0 0;">
                <h3>Enquiry Form</h3>
                <h4>Fill in the form below, and we'll get back to you </h4>
                <div class="row col-md-12">
                  <div class="col-md-6">
                  <span>First Name<i class="spnMandatory">*</i></span>
                  <input type="text" tabindex="1"  maxlength="100" id="txtFirstName" class="text"
                  placeholder="Please enter your first name" required>
                  </div>
                  <div class="col-md-6">
                    <span>Last Name<i class="spnMandatory">*</i></span>
                    <input type="text" tabindex="2" maxlength="100" id="txtLastName" class="text"
                    placeholder="Please enter your last name" required>
                  </div>
                </div>
                <div class="row col-md-12">

                  <div class="col-md-6">
                  <span>Contact Number<i class="spnMandatory">*</i></span>
                  <input type="text"  minlength="9" maxlength="15" id="txtPhone" tabindex="3" class="text numberonly"
                  placeholder="Please enter your phone">
                  <p id="contact"></p>
                </div>
                <div class="col-md-6">
                    <span>Email<i class="spnMandatory">*</i></span>
                    <input type="email" maxlength="50" id="txtEmail" tabindex="4" class="text"
                    placeholder="Please enter your email" required>
                    <p id="result"></p>
                  </div>
                </div>
                <div class="row col-md-12">
                  <div class="col-md-6">
                  <span>Postal Code</span>
                  <input minlength="5" maxlength="10" id="txtPostCode"  tabindex="5" class="text"
                  placeholder="Please enter postal code" type="text" required>
                  <p id="postalcode"></p>
                </div>
                <div class="col-md-6">
                    <span>Are you over 21 ?<i class="spnMandatory">*</i></span>
                    <input type="radio"  id="areYouOver21Yes" tabindex="6" name="areYouOver21" value="1" >&nbsp; <label for="areYouOver21Yes">Yes</label>&nbsp;&nbsp;
                    <input type="radio" id="areYouOver21No" tabindex="7"  name="areYouOver21" value="0">&nbsp; <label for="areYouOver21No">No</label>
                    </div>
                </div>
                <div class="row col-md-12">
                    <div class="col-md-6">
                        <span>Do you have a spare bedroom ?<i class="spnMandatory">*</i></span>
                        <input type="radio"  id="haveSpareBedroomYes" tabindex="8" name="haveSpareBedroom" value="1" >&nbsp; <label for="haveSpareBedroomYes">Yes</label>&nbsp;&nbsp;
                        <input type="radio" id="haveSpareBedroomNo" tabindex="9"  name="haveSpareBedroom" value="0">&nbsp; <label for="haveSpareBedroomNo">No</label>
                        </div>

                  <div class="col-md-6">
                  <span>Are you currently a foster parent who is interested in transferring?<i class="spnMandatory">*</i></span>
                  <input type="radio"  id="currentlyFosterParentYes" tabindex="10" name="currentlyFosterParent" value="1" >&nbsp; <label for="currentlyFosterParentYes">Yes</label>&nbsp;&nbsp;
                  <input type="radio" id="currentlyFosterParentNo" tabindex="11"  name="currentlyFosterParent" value="0">&nbsp; <label for="currentlyFosterParentNo">No</label>
                  </div>
                </div>
                <div class="row col-md-12">
                  <div class="col-md-6">
                  <span>Do you have the right to work in the UK?<i class="spnMandatory">*</i></span>
                  <input type="radio"  id="righttoworkYes" tabindex="12" name="righttowork" value="1" >&nbsp; <label for="righttoworkYes">Yes</label>&nbsp;&nbsp;
                  <input type="radio" id="righttoworkNo" tabindex="13"  name="righttowork" value="0">&nbsp; <label for="righttoworkNo">No</label>
                  </div>
                  <div class="col-md-6">
                    <span><input type="checkbox" value="0" tabindex="14" id="gdprConsent" name="GDPRConsent">
                    GDPR Consent <i class="spnMandatory">*</i></span>
                    </div>
                </div>
            </div>
                <br>
                <div class="row col-md-12">
                 <!-- &nbsp;   <input type="submit" value="Send" id="contactsubmit" class="Send"> -->
                 &nbsp;&nbsp;&nbsp;
                 <button class="btn btn-success" style="width: 100px;" id="btnsubmit"  runat="server">Send </button>
                </div>
                <div class="row col-md-12" id="divPlaceWait">
                    &nbsp;&nbsp;&nbsp;  Please wait.....
                </div>
            </div>
        </div>
    <!-- </form> -->
    <!--<input type="submit" value="Submit" onclick="UserAction()" />-->
</body>
</html>
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
        -webkit-font-smoothing: antialiased;
        -moz-font-smoothing: antialiased;
        -o-font-smoothing: antialiased;
        font-smoothing: antialiased;
        text-rendering: optimizeLegibility;
    }

    .wrapper {
        width: 95%;
        position: relative;
        border: 1px solid #248dad;
        margin-left: 5%;
    }


    #contact-form .ddlSubject,
    #contact-form .text,
    #contact-form .textarea,
    #contact-form .Submit {
        font: 400 12px/12px "Helvetica Neue", Helvetica, Arial, sans-serif;
    }

    #contact-form {
        text-shadow: 0 1px 0 #FFF;
        border-radius: 4px;
        -webkit-border-radius: 4px;
        -moz-border-radius: 4px;
        background: #F9F9F9;
        padding: 25px;
    }

        #contact-form h3 {
            color: #248dad;
            display: block;
            font-size: 28px;
            font-family: Arial;
        }

        #contact-form h4 {
            margin: 5px 0 15px;
            display: block;
            font-size: 13px;
            font-family: Arial;
        }

        #contact-form span {
            cursor: pointer;
            color: #248dad;
            display: block;
            margin: 5px 0;
            font-weight: 900;
            font-family: Arial;
        }

        #contact-form input[type="text"],
        #contact-form .ddlSubject,
        #contact-form .text,
        #contact-form .textarea {
            width: 100%;
            box-shadow: inset 0 1px 2px #DDD, 0 1px 0 #FFF;
            -webkit-box-shadow: inset 0 1px 2px #DDD, 0 1px 0 #FFF;
            -moz-box-shadow: inset 0 1px 2px #DDD, 0 1px 0 #FFF;
            border: 1px solid #CCC;
            background: #FFF;
            margin: 0 0 5px;
            padding: 10px;
            border-radius: 5px;
        }

            #contact-form input[type="text"]:hover,
            #contact-form .ddlSubject,
            #contact-form .textarea:hover,
            #contact-form .text:hover,
            #contact-form .textarea:hover {
                -webkit-transition: border-color 0.3s ease-in-out;
                -moz-transition: border-color 0.3s ease-in-out;
                transition: border-color 0.3s ease-in-out;
                border: 1px solid #AAA;
            }

        #contact-form .textarea {
            height: 100px;
            max-width: 100%;
        }

        #contact-form #contactsubmit {
            cursor: pointer;
            width: 100%;
            border: none;
            background: #991D57;
            background-image: linear-gradient(bottom, #361D00 0%, #361D00 52%);
            background-image: -moz-linear-gradient(bottom, #361D00 0%, #361D00 52%);
            background-image: -webkit-linear-gradient(bottom, #361D00 0%, #361D00 52%);
            color: #FFF;
            margin: 0 0 5px;
            padding: 10px;
            border-radius: 5px;
        }

            #contact-form #contactsubmit:hover {
                background-image: linear-gradient(bottom, #4573BA 0%, #4573BA 52%);
                background-image: -moz-linear-gradient(bottom, #4573BA 0%, #4573BA 52%);
                background-image: -webkit-linear-gradient(bottom, #4573BA 0%, #4573BA 52%);
                -webkit-transition: background 0.3s ease-in-out;
                -moz-transition: background 0.3s ease-in-out;
                transition: background-color 0.3s ease-in-out;
            }

            #contact-form #contactsubmit:active {
                box-shadow: inset 0 1px 3px rgba(0,0,0,0.5);
            }

        #contact-form input:focus,
        #contact-form .textarea:focus {
            outline: 0;
            border: 1px solid #999;
        }

    ::-webkit-input-placeholder {
        color: #888;
    }

    :-moz-placeholder {
        color: #888;
    }

    ::-moz-placeholder {
        color: #888;
    }

    :-ms-input-placeholder {
        color: #888;
    }
</style>
<script>

</script>
<!--function serviceCall() {
           var n = $("#<%=txtName.ClientID%>").val();
           var a = $("#<%=txtAge.ClientID%>").val();
           var e = $("#<%=txtEmail.ClientID%>").val();
           var feed = { name: n, age: a, email: e };
           $.ajax({
               type: "POST",
               url: 'UserAdd.aspx/Add',
               data: JSON.stringify(feed),
               contentType: "application/json; charset=utf-8",
               dataType: "json",
               success: function (msg) {
                   //alert(msg.d);
                   alert('User has been added successfully.');


               },
               error: function (de) {

                   alert("error");

               }
           });
       }-->
